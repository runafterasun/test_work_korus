Сервис по формированию «Сертификата»
Технологии: Java 8, Spring (или Spring Boot), Gradle (или Maven), БД (in-memory), любая библиотека
для логирования.
Описание: Сервис принимает заявку по REST-запросу, валидирует входные данные, отдает их в
работу другому модулю, который обрабатывает заявку, а в процессе смены статусов оповещает по
разным каналам (e-mail, смс).
Необходимое REST API:
1)
Запрос на получение сертификата.
Данные
в
запросе
–
Фамилия
(обязательно),
Имя
(обязательно),
Отчество(обязательно), гражданство РФ или иностранный гражданин (обязательно), e-
mail (опционально, при наличии проверка на корректность адреса), мобильный
телефон (опционально, при наличии проверка на корректность номера).
Валидация - Если выбрано гражданство РФ, то общая длина ФИО не должна превышать
40 символов; Если выбран Иностранный гражданин, то общая длина фамилии с
именем не должна превышать 30 символов.
Ответ – если данные не прошли валидацию, вернуть осмысленный ответ об ошибках
(что не прошло проверку); если валидация пройдена успешно, то отправить данные в
другой «модуль», который будет формировать «сертификат», а в ответ на REST-запрос
вернуть сообщение, заявка принята и Идентификатор заявки.
2)
Запрос на проверку статуса заявки
Данные в запросе – Идентификатор заявки (из ответа первого запроса).
Ответ – один из 4-х статусов (Принята, В процессе обработки, Ошибка обработки,
Готово)
3)
Запрос на получение готового «сертификата»
Данные в запросе – Идентификатор заявки.
Ответ – если заявка имеет статус «Готово», вернуть Идентификатор заявки и
«Сертификат» (он представляет из себя объединённые в одну строку данные заявки +
время ее регистрации, закодированную в Base64). Если «сертификат» не готов, вернуть
ответ, что сертификат с таким идентификатором еще не обработан.
«Модуль формирования сертификата»:
Принимает данные после валидации, в течение некоторого времени выполняет
«тяжёлую работу» по формированию сертификата, в процессе которого меняются
статусы. Статусы должны меняться за произвольные промежутки времени.
«Модуль оповещений»
Если в заявке (первый запрос) были указаны контакты (e-mail и/или телефон), отправляет
уведомления на указанные контакты с новыми статусами. Уведомления представляют из
себя залогированное сообщение в консоль вида: «На vasya @ mai l . ru отправлено
уведомление. Новый статус: В процессе обработки»
Необходимо учесть при разработке, что должна быть возможность легко добавлять любые
новые способы оповещения в будущем.
Важно! По всем неоднозначным моментам реализация на усмотрение разработчика!
